(function(){"use strict";var t={8019:function(t,o,e){var n=e(8935),r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("AppNavbar",{attrs:{title:"Granblue Fantasy - Beautify Honors"}}),e("b-container",[e("HonorForm",{attrs:{"prop-expected-honors":t.expectedHonors,"prop-current-honors":t.currentHonors,"prop-has-solution":t.hasSolution},on:{"update:propExpectedHonors":function(o){t.expectedHonors=o},"update:prop-expected-honors":function(o){t.expectedHonors=o},"update:propCurrentHonors":function(o){t.currentHonors=o},"update:prop-current-honors":function(o){t.currentHonors=o},"update:propHasSolution":function(o){t.hasSolution=o},"update:prop-has-solution":function(o){t.hasSolution=o}}}),e("HonorEditableTable",{attrs:{"prop-diff-honors":t.diffHonors,"prop-has-solution":t.hasSolution},on:{"update:propHasSolution":function(o){t.hasSolution=o},"update:prop-has-solution":function(o){t.hasSolution=o}}})],1)],1)},a=[],s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("b-navbar",{attrs:{variant:"primary",type:"dark"}},[e("b-navbar-brand",{staticClass:"mb-0",attrs:{tag:"h1"}},[t._v(t._s(t.title))]),e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-navbar-brand",{attrs:{href:"https://github.com/qq88976321/gbf-beautify-honors-web"}},[e("b-icon",{attrs:{icon:"github"}})],1)],1)],1)},i=[],l={props:{title:String}},u=l,c=e(1001),p=(0,c.Z)(u,s,i,!1,null,null,null),d=p.exports,f=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"form-group-container"},[e("HonorFormInput",{attrs:{label:"Current Honors","prop-honors":t.currentHonors},on:{"update:propHonors":function(o){t.currentHonors=o},"update:prop-honors":function(o){t.currentHonors=o}}}),e("HonorFormInput",{attrs:{label:"Expected Honors","prop-honors":t.expectedHonors},on:{"update:propHonors":function(o){t.expectedHonors=o},"update:prop-honors":function(o){t.expectedHonors=o}}}),e("b-form-group",{attrs:{"valid-feedback":"There is a solution.","invalid-feedback":t.diffHonorsInvalidFeedback,label:"How many honors do you need to get","label-for":"diff-honors"}},[e("b-form-input",{class:this.propHasSolution?"success":"danger",attrs:{readonly:"",id:"diff-honors",state:t.diffHonorsState,value:t.diffHonors}})],1)],1)},h=[],m=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"form-group-container"},[e("b-form-group",{attrs:{label:t.label,"label-for":t.label}},[e("b-form-input",{attrs:{type:"text",id:t.label,formatter:t.formatHonors},model:{value:t.honors,callback:function(o){t.honors=t._n(o)},expression:"honors"}})],1)],1)},b=[],v={props:{label:[String],propHonors:[Number,String]},methods:{formatHonors(t){return String(t).replace(/[^0-9]/g,"").substring(0,12)}},computed:{honors:{get(){return this.propHonors},set(t){this.$emit("update:propHonors",t)}},honorsState(){return/^\d+$/.test(this.propHonors)}}},H=v,g=(0,c.Z)(H,m,b,!1,null,null,null),x=g.exports,y={components:{HonorFormInput:x},props:{propCurrentHonors:[Number,String],propExpectedHonors:[Number,String],propHasSolution:Boolean},computed:{currentHonors:{get(){return this.propCurrentHonors},set(t){this.$emit("update:propCurrentHonors",t)}},expectedHonors:{get(){return this.propExpectedHonors},set(t){this.$emit("update:propExpectedHonors",t)}},diffHonors(){return this.expectedHonors-this.currentHonors},diffHonorsState(){return this.propHasSolution},diffHonorsInvalidFeedback(){return"There is no solution to achieve the expected honors. Please relax the constraints and try again."}}},S=y,_=(0,c.Z)(S,f,h,!1,null,null,null),k=_.exports,w=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"table-container"},[e("b-row",{attrs:{"align-h":"between"}},[e("b-col",[e("b-button",{attrs:{variant:"primary"},on:{click:function(o){return t.handleAdd()}}},[t._v(" Add Action ")])],1),e("b-col",[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-restore-default-modal",modifiers:{"confirm-restore-default-modal":!0}}],staticClass:"float-right",attrs:{variant:"danger"}},[t._v(" Restore Default Actions ")])],1)],1),e("b-modal",{attrs:{id:"confirm-restore-default-modal",centered:"",title:"Confirmation","ok-variant":"danger","ok-title":"Yes","cancel-title":"No"},on:{ok:function(o){return t.handleRestoreDefault()}}},[t._v(" This action cannot be undone. Are you sure you want to restore to the default actions? ")]),e("b-editable-table",{staticClass:"editable-table",attrs:{rowUpdate:t.rowUpdate,bordered:"",fields:t.fields},on:{"input-change":t.handleInput},scopedSlots:t._u([{key:"cell(delete)",fn:function(o){return[e("b-icon",{staticClass:"remove-icon",attrs:{icon:"trash"},on:{click:function(e){return t.handleDelete(o)}}})]}},{key:"head(honors)",fn:function(o){return[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{"text-decoration":"underline dotted"},attrs:{title:"The exact honor earned from this action."}},[t._v(t._s(o.label))])]}},{key:"head(maxTimes)",fn:function(o){return[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{"text-decoration":"underline dotted"},attrs:{title:"Max acceptable times of this action."}},[t._v(t._s(o.label))])]}},{key:"cell(optimal)",fn:function(o){return[t._v(" "+t._s(t.optimalTimes[o.index])+" ")]}}]),model:{value:t.items,callback:function(o){t.items=o},expression:"items"}})],1)},T=[],E=e(528),O=e(8282),C=e(905);let N=[{id:(0,C.Z)(),action:"Eyeball N (0 button)",honors:4e3,maxTimes:10},{id:(0,C.Z)(),action:"Eyeball H (0 button)",honors:8e3,maxTimes:10},{id:(0,C.Z)(),action:"Meat Beast VH (0 button)",honors:21400,maxTimes:30},{id:(0,C.Z)(),action:"Meat Beast EX (0 button)",honors:50578,maxTimes:30},{id:(0,C.Z)(),action:"Meat Beast EX+ (0 button)",honors:88e3,maxTimes:30},{id:(0,C.Z)(),action:"Meat Beast EX+ (1 summon + attack only)",honors:88010,maxTimes:30},{id:(0,C.Z)(),action:"Join raid and only use Break Assassin",honors:1,maxTimes:10}];var P={async created(){this.glpk=await(0,O.Z)(),await this.solve()},components:{BEditableTable:E.Z},props:{propDiffHonors:[Number,String],propHasSolution:Boolean},computed:{hasSolution:{get(){return this.propHasSolution},set(t){this.$emit("update:propHasSolution",t)}}},data(){return{glpk:null,fields:[{key:"delete",label:""},{key:"action",label:"Action",type:"text",editable:!0,placeholder:"Enter Action...",class:"action-col"},{key:"honors",label:"Honors",type:"text",formatter:this.formatPositiveInteger,editable:!0,class:"honors-col"},{key:"maxTimes",label:"Max times",type:"text",editable:!0,formatter:this.formatPositiveInteger,placeholder:"Enter Max times...",class:"max-times-col"},{key:"optimal",label:"Optimal times",type:"number",editable:!1,class:"optimal-times-col",variant:""}],items:N,optimalTimes:Array(7).fill("-"),rowUpdate:{}}},methods:{formatPositiveInteger(t){return String(t).replace(/[^0-9]/g,"").substring(0,9)},handleInput(){},handleAdd(){const t=(0,C.Z)();this.rowUpdate={edit:!1,id:t,action:"add",data:{id:t,action:"New Action",honors:0,maxTimes:10}}},handleRestoreDefault(){this.items=N},handleDelete(t){this.rowUpdate={id:t.id,action:"delete"}},async solve(){if(!this.glpk)return;const t={name:"LP",generals:this.items.map((t=>t.id)),objective:{direction:this.glpk.GLP_MIN,name:"obj",vars:this.items.map((t=>({name:t.id,coef:1})))},subjectTo:[{name:"total",vars:this.items.map((t=>({name:t.id,coef:t.honors}))),bnds:{type:this.glpk.GLP_FX,ub:this.propDiffHonors,lb:this.propDiffHonors}},...this.items.map((t=>({name:`max times of ${t.id}, action name=${t.action}`,vars:[{name:t.id,coef:1}],bnds:0==t.maxTimes?{type:this.glpk.GLP_FX,ub:0,lb:0}:{type:this.glpk.GLP_DB,ub:parseInt(t.maxTimes),lb:0}})))]};try{const e=await this.glpk.solve(t);if(e.result.status==this.glpk.GLP_OPT){this.optimalTimes=this.items.map((t=>e.result.vars[t.id])),this.hasSolution=!0;var o=[];this.items.forEach(((t,e)=>{const n=this.optimalTimes[e];o.push(`${t.honors} * ${n}`)})),console.debug(o.join(" + "))}else this.optimalTimes=this.items.map((()=>"-")),this.hasSolution=!1}catch(e){console.err(e)}}},mounted(){if(localStorage.items)try{this.items=JSON.parse(localStorage.items)}catch(t){console.error(t)}},watch:{propDiffHonors:async function(){await this.solve()},items:async function(t){const o=JSON.stringify(t);localStorage.items=o,await this.solve()},hasSolution:function(){this.hasSolution?this.fields[this.fields.length-1].variant="success":this.fields[this.fields.length-1].variant="danger"}}},Z=P,$=(0,c.Z)(Z,w,T,!1,null,null,null),A=$.exports,j={components:{AppNavbar:d,HonorForm:k,HonorEditableTable:A},computed:{diffHonors(){return this.expectedHonors-this.currentHonors}},data(){return{currentHonors:0,expectedHonors:0,hasSolution:null}},mounted(){localStorage.currentHonors&&(this.currentHonors=localStorage.currentHonors),localStorage.expectedHonors&&(this.expectedHonors=localStorage.expectedHonors)},watch:{currentHonors(t){localStorage.currentHonors=t},expectedHonors(t){localStorage.expectedHonors=t}}},I=j,F=(0,c.Z)(I,r,a,!1,null,null,null),M=F.exports,B=e(8262),D=e(3266);e(44);n["default"].use(B.XG7),n["default"].use(D.A7),n["default"].config.productionTip=!1,new n["default"]({render:t=>t(M)}).$mount("#app")}},o={};function e(n){var r=o[n];if(void 0!==r)return r.exports;var a=o[n]={exports:{}};return t[n](a,a.exports,e),a.exports}e.m=t,function(){var t=[];e.O=function(o,n,r,a){if(!n){var s=1/0;for(c=0;c<t.length;c++){n=t[c][0],r=t[c][1],a=t[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(e.O).every((function(t){return e.O[t](n[l])}))?n.splice(l--,1):(i=!1,a<s&&(s=a));if(i){t.splice(c--,1);var u=r();void 0!==u&&(o=u)}}return o}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,r,a]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,n){var r,a,s=n[0],i=n[1],l=n[2],u=0;if(s.some((function(o){return 0!==t[o]}))){for(r in i)e.o(i,r)&&(e.m[r]=i[r]);if(l)var c=l(e)}for(o&&o(n);u<s.length;u++)a=s[u],e.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return e.O(c)},n=self["webpackChunkgbf_beautify_honors_web"]=self["webpackChunkgbf_beautify_honors_web"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(8019)}));n=e.O(n)})();
//# sourceMappingURL=app.813af975.js.map