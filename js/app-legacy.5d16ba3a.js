(function(){"use strict";var t={4707:function(t,e,o){o(6992),o(8674),o(9601),o(7727);var n=o(8935),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("AppNavbar",{attrs:{title:"Granblue Fantasy - Beautify Honors"}}),o("b-container",[o("HonorForm",{attrs:{"prop-expected-honors":t.expectedHonors,"prop-current-honors":t.currentHonors,"prop-has-solution":t.hasSolution},on:{"update:propExpectedHonors":function(e){t.expectedHonors=e},"update:prop-expected-honors":function(e){t.expectedHonors=e},"update:propCurrentHonors":function(e){t.currentHonors=e},"update:prop-current-honors":function(e){t.currentHonors=e},"update:propHasSolution":function(e){t.hasSolution=e},"update:prop-has-solution":function(e){t.hasSolution=e}}}),o("HonorEditableTable",{attrs:{"prop-diff-honors":t.diffHonors,"prop-has-solution":t.hasSolution},on:{"update:propHasSolution":function(e){t.hasSolution=e},"update:prop-has-solution":function(e){t.hasSolution=e}}})],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-navbar",{attrs:{variant:"primary",type:"dark"}},[o("b-navbar-brand",{staticClass:"mb-0",attrs:{tag:"h1"}},[t._v(t._s(t.title))]),o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-navbar-brand",{attrs:{href:"https://github.com/qq88976321/gbf-beautify-honors-web"}},[o("b-icon",{attrs:{icon:"github"}})],1)],1)],1)},s=[],u={props:{title:String}},c=u,l=o(1001),p=(0,l.Z)(c,i,s,!1,null,null,null),d=p.exports,f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form-group-container"},[o("HonorFormInput",{attrs:{label:"Current Honors","prop-honors":t.currentHonors},on:{"update:propHonors":function(e){t.currentHonors=e},"update:prop-honors":function(e){t.currentHonors=e}}}),o("HonorFormInput",{attrs:{label:"Expected Honors","prop-honors":t.expectedHonors},on:{"update:propHonors":function(e){t.expectedHonors=e},"update:prop-honors":function(e){t.expectedHonors=e}}}),o("b-form-group",{attrs:{"valid-feedback":"There is a solution.","invalid-feedback":t.diffHonorsInvalidFeedback,label:"How many honors do you need to get","label-for":"diff-honors"}},[o("b-form-input",{class:this.propHasSolution?"success":"danger",attrs:{readonly:"",id:"diff-honors",state:t.diffHonorsState,value:t.diffHonors}})],1)],1)},m=[],h=(o(9653),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form-group-container"},[o("b-form-group",{attrs:{label:t.label,"label-for":t.label}},[o("b-form-input",{attrs:{type:"text",id:t.label,formatter:t.formatHonors},model:{value:t.honors,callback:function(e){t.honors=t._n(e)},expression:"honors"}})],1)],1)}),b=[],v=(o(4916),o(5306),o(7601),{props:{label:[String],propHonors:[Number,String]},methods:{formatHonors:function(t){return String(t).replace(/[^0-9]/g,"").substring(0,12)}},computed:{honors:{get:function(){return this.propHonors},set:function(t){this.$emit("update:propHonors",t)}},honorsState:function(){return/^\d+$/.test(this.propHonors)}}}),g=v,H=(0,l.Z)(g,h,b,!1,null,null,null),x=H.exports,y={components:{HonorFormInput:x},props:{propCurrentHonors:[Number,String],propExpectedHonors:[Number,String],propHasSolution:Boolean},computed:{currentHonors:{get:function(){return this.propCurrentHonors},set:function(t){this.$emit("update:propCurrentHonors",t)}},expectedHonors:{get:function(){return this.propExpectedHonors},set:function(t){this.$emit("update:propExpectedHonors",t)}},diffHonors:function(){return this.expectedHonors-this.currentHonors},diffHonorsState:function(){return this.propHasSolution},diffHonorsInvalidFeedback:function(){return"There is no solution to achieve the expected honors. Please relax the constraints and try again."}}},S=y,k=(0,l.Z)(S,f,m,!1,null,null,null),w=k.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table-container"},[o("b-row",{attrs:{"align-h":"between"}},[o("b-col",[o("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v(" Add Action ")])],1),o("b-col",[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-restore-default-modal",modifiers:{"confirm-restore-default-modal":!0}}],staticClass:"float-right",attrs:{variant:"danger"}},[t._v(" Restore Default Actions ")])],1)],1),o("b-modal",{attrs:{id:"confirm-restore-default-modal",centered:"",title:"Confirmation","ok-variant":"danger","ok-title":"Yes","cancel-title":"No"},on:{ok:function(e){return t.handleRestoreDefault()}}},[t._v(" This action cannot be undone. Are you sure you want to restore to the default actions? ")]),o("b-editable-table",{staticClass:"editable-table",attrs:{rowUpdate:t.rowUpdate,bordered:"",fields:t.fields},on:{"input-change":t.handleInput},scopedSlots:t._u([{key:"cell(delete)",fn:function(e){return[o("b-icon",{staticClass:"remove-icon",attrs:{icon:"trash"},on:{click:function(o){return t.handleDelete(e)}}})]}},{key:"head(honors)",fn:function(e){return[o("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{"text-decoration":"underline dotted"},attrs:{title:"The exact honor earned from this action."}},[t._v(t._s(e.label))])]}},{key:"head(maxTimes)",fn:function(e){return[o("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{"text-decoration":"underline dotted"},attrs:{title:"Max acceptable times of this action."}},[t._v(t._s(e.label))])]}},{key:"cell(optimal)",fn:function(e){return[t._v(" "+t._s(t.optimalTimes[e.index])+" ")]}}]),model:{value:t.items,callback:function(e){t.items=e},expression:"items"}})],1)},T=[],E=o(4479),Z=o(6198),O=(o(3290),o(1249),o(2222),o(1539),o(4747),o(9600),o(8862),o(8975),o(528)),C=o(8282),N=o(905),P=[{id:(0,N.Z)(),action:"Eyeball N (0 button)",honors:4e3,maxTimes:10},{id:(0,N.Z)(),action:"Eyeball H (0 button)",honors:8e3,maxTimes:10},{id:(0,N.Z)(),action:"Meat Beast VH (0 button)",honors:21400,maxTimes:30},{id:(0,N.Z)(),action:"Meat Beast EX (0 button)",honors:50577,maxTimes:30},{id:(0,N.Z)(),action:"Meat Beast EX+ (0 button)",honors:88e3,maxTimes:30},{id:(0,N.Z)(),action:"Meat Beast EX+ (1 summon + attack only)",honors:88010,maxTimes:30},{id:(0,N.Z)(),action:"Join raid and only use Break Assassin",honors:1,maxTimes:10}],A={created:function(){var t=this;return(0,Z.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Z)();case 2:return t.glpk=e.sent,e.next=5,t.solve();case 5:case"end":return e.stop()}}),e)})))()},components:{BEditableTable:O.Z},props:{propDiffHonors:[Number,String],propHasSolution:Boolean},computed:{hasSolution:{get:function(){return this.propHasSolution},set:function(t){this.$emit("update:propHasSolution",t)}}},data:function(){return{glpk:null,fields:[{key:"delete",label:""},{key:"action",label:"Action",type:"text",editable:!0,placeholder:"Enter Action...",class:"action-col"},{key:"honors",label:"Honors",type:"text",formatter:this.formatPositiveInteger,editable:!0,class:"honors-col"},{key:"maxTimes",label:"Max times",type:"text",editable:!0,formatter:this.formatPositiveInteger,placeholder:"Enter Max times...",class:"max-times-col"},{key:"optimal",label:"Optimal times",type:"number",editable:!1,class:"optimal-times-col",variant:""}],items:P,optimalTimes:Array(7).fill("-"),rowUpdate:{}}},methods:{formatPositiveInteger:function(t){return String(t).replace(/[^0-9]/g,"").substring(0,9)},handleInput:function(){},handleAdd:function(){var t=(0,N.Z)();this.rowUpdate={edit:!1,id:t,action:"add",data:{id:t,action:"New Action",honors:0,maxTimes:10}}},handleRestoreDefault:function(){this.items=P},handleDelete:function(t){this.rowUpdate={id:t.id,action:"delete"}},solve:function(){var t=this;return(0,Z.Z)(regeneratorRuntime.mark((function e(){var o,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.glpk){e.next=2;break}return e.abrupt("return");case 2:return o={name:"LP",generals:t.items.map((function(t){return t.id})),objective:{direction:t.glpk.GLP_MIN,name:"obj",vars:t.items.map((function(t){return{name:t.id,coef:1}}))},subjectTo:[{name:"total",vars:t.items.map((function(t){return{name:t.id,coef:t.honors}})),bnds:{type:t.glpk.GLP_FX,ub:t.propDiffHonors,lb:t.propDiffHonors}}].concat((0,E.Z)(t.items.map((function(e){return{name:"max times of ".concat(e.id,", action name=").concat(e.action),vars:[{name:e.id,coef:1}],bnds:0==e.maxTimes?{type:t.glpk.GLP_FX,ub:0,lb:0}:{type:t.glpk.GLP_DB,ub:parseInt(e.maxTimes),lb:0}}}))))},e.prev=3,e.next=6,t.glpk.solve(o);case 6:n=e.sent,n.result.status==t.glpk.GLP_OPT?(t.optimalTimes=t.items.map((function(t){return n.result.vars[t.id]})),t.hasSolution=!0,r=[],t.items.forEach((function(e,o){var n=t.optimalTimes[o];r.push("".concat(e.honors," * ").concat(n))})),console.debug(r.join(" + "))):(t.optimalTimes=t.items.map((function(){return"-"})),t.hasSolution=!1),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.err(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()}},mounted:function(){if(localStorage.items)try{this.items=JSON.parse(localStorage.items)}catch(t){console.error(t)}},watch:{propDiffHonors:function(){var t=(0,Z.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.solve();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),items:function(){var t=(0,Z.Z)(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=JSON.stringify(e),localStorage.items=o,t.next=4,this.solve();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),hasSolution:function(){this.hasSolution?this.fields[this.fields.length-1].variant="success":this.fields[this.fields.length-1].variant="danger"}}},j=A,I=(0,l.Z)(j,_,T,!1,null,null,null),F=I.exports,M={components:{AppNavbar:d,HonorForm:w,HonorEditableTable:F},computed:{diffHonors:function(){return this.expectedHonors-this.currentHonors}},data:function(){return{currentHonors:0,expectedHonors:0,hasSolution:null}},mounted:function(){localStorage.currentHonors&&(this.currentHonors=localStorage.currentHonors),localStorage.expectedHonors&&(this.expectedHonors=localStorage.expectedHonors)},watch:{currentHonors:function(t){localStorage.currentHonors=t},expectedHonors:function(t){localStorage.expectedHonors=t}}},R=M,$=(0,l.Z)(R,r,a,!1,null,null,null),B=$.exports,D=o(8262),G=o(3266);o(44);n["default"].use(D.XG7),n["default"].use(G.A7),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(B)}}).$mount("#app")}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n](a,a.exports,o),a.loaded=!0,a.exports}o.m=t,function(){var t=[];o.O=function(e,n,r,a){if(!n){var i=1/0;for(l=0;l<t.length;l++){n=t[l][0],r=t[l][1],a=t[l][2];for(var s=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(o.O).every((function(t){return o.O[t](n[u])}))?n.splice(u--,1):(s=!1,a<i&&(i=a));if(s){t.splice(l--,1);var c=r();void 0!==c&&(e=c)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,r,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,a,i=n[0],s=n[1],u=n[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(u)var l=u(o)}for(e&&e(n);c<i.length;c++)a=i[c],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(l)},n=self["webpackChunkgbf_beautify_honors_web"]=self["webpackChunkgbf_beautify_honors_web"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(4707)}));n=o.O(n)})();
//# sourceMappingURL=app-legacy.5d16ba3a.js.map